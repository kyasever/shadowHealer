# hs-js

开发两个版本

- node 命令行
- vue 版本

# 性能测试

指标:`run('stake -t 360000 -l 5')`
beta1.0 4783ms
bata1.1 8389ms
beta1.2 7221ms

# todo:

- 重构是对的,如果编写了很多角色和道具后再迁移可就太嫩了
- 复杂度如果可控的话,就不要着急写单测,最多写点全局性质的.避免改动连带改动单测成本过高

# roadmap

beta2.0:

- 游戏主流程跑通, 包含战斗内和战斗外

# release

beta1.0-11.24

- 可以模拟一场战斗, 支持 node 和 vue 运行.
- 重构了 commander 换成了自己实现的版本

beta1.1-11.29

- effect 重构, 万物皆 effect, 所有变更均走 makeEffect, 过程记录在 effect 日志中
- property 重构. 初始化走 calculateProperty().
- 简单的多次战斗模拟
- 优化了 debug 方式和 log 统计

beta1.2-12.3

- 正式引入 phaser 和 vue,重构项目目录

beta1.3-12.6

- 优化与调整序列, 定义生命周期
- 建立 vue 层级,规划后续分配
- 处理 asserts,打包也包含进去

beta1.4- 12.10?

- 添加武僧,增加 json 文件获取, 增加从 json 创建角色
- 虽然增加 json 的读取 SOP,但是 json 编辑起来不太友好,考虑还是用 ts 来写伪 json 会合适一点...
- 去掉 nodejs 的兼容性支持, 接下来只支持 vue 版本.

* 搞一下 json 的编写规范和标准的解析函数. 避免留下大坑... json 的格式要有 ts 定义, 但字段对应不需要特别明确, 对应的处理器可以用舒服的方式进行处理
* 删掉 factroy
* 做一个战斗上人界面吧,允许选择上谁,顺序如何
* 把 stake 做成一个 tab, 这个 tab 里游戏速度默认满点. 可以自由的选择上哪些角色, 并有方便的一键按钮

# 核心逻辑

时间切片. 每秒 50 逻辑帧 0.02s 一帧, 在模拟中只有帧数
时间都是以帧数计算的, 每 update 走一帧, 50update 为游戏内逻辑 1s
AI 角色采用攻击间隔+技能优先级模式, 每 x 秒攻击一次,使用(平 a/技能/大招)
makeEffect 是绝对核心函数. 代表对某个角色施加一个影响, 只有这个函数有权利改变数据
支持协程和延时等功能

# 小目标 & 脑洞

走出舒适区:
每个角色要与玩家角色存在一点或多或少的交互. 不能是摆个按钮给玩家. 或者是之间的交互,与遗物的交互
玩家能够提供的能力, 盾(提高韧性,防打断) 霸体(免控) 控血
角色要有故事,应该编一些设定之类的东西
